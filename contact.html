<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Vilana Event & Catering</title>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YW71FCW4FJ"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YW71FCW4FJ');
</script>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&family=Cormorant+SC:wght@400;500;700&display=swap" rel="stylesheet" />

<style>
body { font-family: 'Cormorant SC', serif; background-color: #fdfaf6; }
h1, h2, h3, p, span { font-family: 'Cormorant SC', serif; }
.logo-container { display: flex; align-items: baseline; gap: 0.3rem; margin-top: 4px; }
.logo-title { font-family: 'Cinzel Decorative', cursive; font-size: 1.8rem; font-weight: 500; letter-spacing: 0.5px; color: #1f2937; }
.logo-subtitle { font-size: 1.2rem; color: #1f2937; }
  .lang { display: none; }        /* —Å–∫—Ä—ã–≤–∞–µ–º, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —è–∑—ã–∫ —á–µ—Ä–µ–∑ JS */
  .hidden-field { display: none; }/* honeypot */
</style>
</head>
<body>

<!-- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: —Å—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è —à–∞–ø–∫–∞ –∏ —Ñ—É—Ç–µ—Ä –∏–∑ index.html -->
<div id="site-header"></div>

<main class="py-16">
<div class="mx-auto px-4 max-w-3xl text-center">
    <h2 class="text-4xl font-bold mb-12 lang lang-de" data-disp="block">Kontaktieren Sie uns</h2>
    <h2 class="text-4xl font-bold mb-12 lang lang-ru" data-disp="block">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h2>

    <div class="text-center mb-12 space-y-2">
    <p class="text-lg"><strong>E-Mail:</strong> <a href="mailto:v.s@vilana.info" class="text-amber-700">v.s@vilana.info</a></p>
    <p class="text-lg"><strong>Telefon 1:</strong> <a href="tel:+4917657775996" class="text-amber-700">+49 176 5777 5996</a></p>
    <p class="text-lg"><strong>Telefon 2:</strong> <a href="tel:+4917642288707" class="text-amber-700">+49 176 4228 8707</a></p>
    <p class="text-lg"><strong>WhatsApp:</strong> <a href="https://wa.me/4917657775996" class="text-amber-700" target="_blank" rel="noopener noreferrer">Jetzt schreiben</a></p>
    <p class="text-lg"><strong>Adresse:</strong> 31855 Aerzen / Osterstr. 28</p>
    </div>

    <form id="contactForm" class="bg-white p-8 rounded-lg shadow-md">
    <input type="text" name="honeypot" class="hidden-field" autocomplete="off">

    <div class="mb-4">
        <label for="name" class="block text-gray-700 mb-2">
        <span class="lang lang-de">Ihr Name</span>
        <span class="lang lang-ru">–í–∞—à–µ –∏–º—è</span>
        </label>
        <input class="w-full border border-gray-300 rounded px-4 py-2" type="text" id="name" name="name" required />
    </div>

    <div class="mb-4">
        <label for="email" class="block text-gray-700 mb-2">
        <span class="lang lang-de">Ihre E-Mail</span>
        <span class="lang lang-ru">–í–∞—à e-mail</span>
        </label>
        <input class="w-full border border-gray-300 rounded px-4 py-2" type="email" id="email" name="email" required />
    </div>

    <div class="mb-4">
        <label for="message" class="block text-gray-700 mb-2">
        <span class="lang lang-de">Ihre Nachricht</span>
        <span class="lang lang-ru">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        </label>
        <textarea class="w-full border border-gray-300 rounded px-4 py-2" id="message" name="message" rows="5" required></textarea>
    </div>

    <div class="mb-4">
        <label class="inline-flex items-center">
        <input type="checkbox" required class="mr-2" />
        <span class="text-sm lang lang-de">Ich akzeptiere die <a href="vilana-legal.html" class="text-amber-700 underline">AGB & Datenschutz</a></span>
        <span class="text-sm lang lang-ru">–Ø –ø—Ä–∏–Ω–∏–º–∞—é <a href="vilana-legal.html" class="text-amber-700 underline">—É—Å–ª–æ–≤–∏—è –∏ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></span>
        </label>
    </div>

    <div id="formMsg" class="text-center text-green-600 font-semibold hidden mb-4">Nachricht erfolgreich gesendet!</div>

    <button type="submit" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-6 rounded-full">
        <span class="lang lang-de">Senden</span>
        <span class="lang lang-ru">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
    </button>
    </form>
</div>
</main>

<div id="site-footer"></div>

<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script>
/* ========= 1) –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ–º header/footer –∏–∑ index.html ========= */
async function loadFromIndex(selector, targetId) {
  try {
    const resp = await fetch('index.html', { cache: 'no-cache' });
    const text = await resp.text();
    const doc = new DOMParser().parseFromString(text, 'text/html');
    const part = doc.querySelector(selector);
    if (part) document.getElementById(targetId).innerHTML = part.outerHTML;
  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ index.html:', err);
  }
}

/* ========= 2) –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —è–∑—ã–∫–∞ ========= */
window.setLanguage = window.setLanguage || function setLanguage(lang) {
  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –¥–ª—è event-—Å—Å—ã–ª–∫–∏
  localStorage.setItem('vilana_lang', lang);

  // —Ç—É–º–±–ª–µ—Ä—ã –Ω–∞ <html> (–µ—Å–ª–∏ —Å—Ç–∏–ª–∏–∑—É–µ—à—å –ø–æ –Ω–∏–º)
  document.documentElement.classList.toggle('lang-de', lang === 'de');
  document.documentElement.classList.toggle('lang-ru', lang === 'ru');

  // —Å–ø—Ä—è—Ç–∞—Ç—å –≤—Å—ë .lang –∏ –ø–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω–æ–µ
  document.querySelectorAll('.lang').forEach(el => el.style.display = 'none');

  const blockTags = new Set(['H1','H2','H3','H4','H5','H6','P','DIV','LI','UL','OL','SECTION','ARTICLE','FOOTER','HEADER']);
  document.querySelectorAll('.lang-' + lang).forEach(el => {
    const hint = el.getAttribute('data-disp');
    el.style.display = hint ? hint : (blockTags.has(el.tagName) ? 'block' : 'inline');
  });

  // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞ (–µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –µ—Å—Ç—å –≤ header)
  document.querySelectorAll('[onclick^="setLanguage"], [data-lang]').forEach(btn => {
    const isActive = (btn.getAttribute('onclick') || '').includes("'" + lang + "'") || btn.getAttribute('data-lang') === lang;
    btn.classList.toggle('ring-2', isActive);
    btn.classList.toggle('ring-amber-500', isActive);
  });
};

/* ========= 3) –°—Å—ã–ª–∫–∞ Event —Å UTM –∏ —è–∑—ã–∫–æ–º ========= */
(function(){
  const EVENT_ID = 'russian-oktoberfest-2025';
  function copyTrackingParams(fromURL, toURL) {
    const keep = ['utm_source','utm_medium','utm_campaign','utm_term','utm_content','gclid','fbclid'];
    for (const k of keep) {
      const v = fromURL.searchParams.get(k);
      if (v) toURL.searchParams.set(k, v);
    }
  }
  window.setEventLinks = function setEventLinks() {
    const url  = new URL(location.href);
    const lang = (url.searchParams.get('lang') || localStorage.getItem('vilana_lang') || 'de').toLowerCase();

    const ev = new URL('event.html', url);
    ev.searchParams.set('id', EVENT_ID);
    ev.searchParams.set('lang', lang);
    copyTrackingParams(url, ev);

    const selectors = '#eventLink, #eventLinkMobile, #eventLinkFooter, a[data-ev-link]';
    document.querySelectorAll(selectors).forEach(a => { a.href = ev.href; });
  };
})();

/* ========= 4) –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω—é ========= */
function initHeaderInteractions() {
  const toggleBtn  = document.getElementById('menuToggle');
  const mobileMenu = document.getElementById('mobileMenu');
  if (toggleBtn && mobileMenu) {
    toggleBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
  }
}

/* ========= 5) –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º —è–∑—ã–∫–∞ (–±–µ–∑ inline) ========= */
document.addEventListener('click', (e) => {
  const btn = e.target.closest('[data-lang]');
  if (!btn) return;
  const lang = btn.getAttribute('data-lang');
  window.setLanguage(lang);
});

/* ========= 6) EmailJS ========= */
function initEmailJS() {
  emailjs.init("vfmomNKrMxrf2xqDW"); // –≤–∞—à public key
const form = document.getElementById("contactForm");
if (!form) return;
form.addEventListener("submit", function (e) {
    e.preventDefault();
    if (form.honeypot.value !== "") return; // –∞–Ω—Ç–∏—Å–ø–∞–º
    emailjs.sendForm('service_75biswm', 'template_fuxgrlb', form)
    .then(() => {
        document.getElementById("formMsg").classList.remove("hidden");
        form.reset();
    }, (error) => {
        alert("Fehler beim Senden: " + (error?.text || 'Unbekannter Fehler'));
    });
});
}

/* ========= 7) Boot ========= */
document.addEventListener('DOMContentLoaded', async () => {
  // –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º header/footer –∏–∑ index.html
await loadFromIndex('header', 'site-header');
await loadFromIndex('footer', 'site-footer');

  // —Ç–µ–ø–µ—Ä—å —ç–ª–µ–º–µ–Ω—Ç—ã header —É–∂–µ –≤ DOM ‚Äî –º–æ–∂–Ω–æ –Ω–∞–≤–µ—Å–∏—Ç—å –ª–æ–≥–∏–∫—É –º–µ–Ω—é
initHeaderInteractions();
// === –î–û–ë–ê–í–ò–¢–¨ –û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ö–ù–û–ü–ö–ò –Ø–ó–´–ö–ê ===
function ensureLangButtons() {
  // Desktop –±–ª–æ–∫ —Å —Ñ–ª–∞–≥–∞–º–∏
const desktopLangBox =
    document.querySelector('.md\\:flex.gap-2')  // —Ç–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∫–Ω–æ–ø–∫–∞–º–∏
    || (function(){ // –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–¥–∏–º —Å–ø—Ä–∞–≤–∞ –æ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        const navWrap = document.querySelector('header .container > div.flex.justify-between');
        const box = document.createElement('div');
        box.className = 'hidden md:flex gap-2';
        navWrap?.appendChild(box);
        return box;
    })();

if (desktopLangBox) {
    // DE
    if (!desktopLangBox.querySelector('[data-lang="de"],[onclick*="setLanguage(\'de\')"]')) {
    const deBtn = document.createElement('button');
    deBtn.type = 'button';
    deBtn.setAttribute('data-lang','de');
    deBtn.className = 'px-2';
    deBtn.textContent = 'üá©üá™';
    desktopLangBox.appendChild(deBtn);
    }
    // RU
    if (!desktopLangBox.querySelector('[data-lang="ru"],[onclick*="setLanguage(\'ru\')"]')) {
    const ruBtn = document.createElement('button');
    ruBtn.type = 'button';
    ruBtn.setAttribute('data-lang','ru');
    ruBtn.className = 'px-2';
    ruBtn.textContent = 'üá∑üá∫';
    desktopLangBox.appendChild(ruBtn);
    }
}

  // Mobile –º–µ–Ω—é: –¥–æ–±–∞–≤–∏–º —Å—Ç—Ä–æ–∫—É —Å —è–∑—ã–∫–∞–º–∏, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
const mobileMenu = document.getElementById('mobileMenu');
if (mobileMenu && !mobileMenu.querySelector('.lang-row')) {
    const row = document.createElement('div');
    row.className = 'lang-row flex gap-3 items-center pt-2';
    row.innerHTML = `
    <button type="button" data-lang="de" class="px-2">üá©üá™</button>
    <button type="button" data-lang="ru" class="px-2">üá∑üá∫</button>
    `;
    mobileMenu.prepend(row);
}
}

// === –í–°–¢–ê–í–¨ –í –°–í–û–ô BOOT –ü–û–°–õ–ï loadFromIndex ===
document.addEventListener('DOMContentLoaded', async () => {
await loadFromIndex('header', 'site-header');
await loadFromIndex('footer', 'site-footer');

  // –¥–æ–±–∞–≤–∏–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–∞
ensureLangButtons();

  // –¥–∞–ª—å—à–µ ‚Äî —Ç–≤–æ–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã:
initHeaderInteractions?.();

const url = new URL(location.href);
const urlLang = (url.searchParams.get('lang') || '').toLowerCase();
const saved   = (localStorage.getItem('vilana_lang') || '').toLowerCase();
window.setLanguage(urlLang || saved || 'de');

window.setEventLinks?.();
initEmailJS?.();
});

  // —è–∑—ã–∫: ?lang=‚Ä¶ > localStorage > de
const url = new URL(location.href);
const urlLang = (url.searchParams.get('lang') || '').toLowerCase();
const saved   = (localStorage.getItem('vilana_lang') || '').toLowerCase();
window.setLanguage(urlLang || saved || 'de');

  // –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ Event (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —è–∑—ã–∫)
window.setEventLinks();

  // EmailJS
initEmailJS();
});
</script>

</body>
</html>
